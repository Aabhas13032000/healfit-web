<%- include('../../components/header/header.ejs',{cssFile : 'adminPages',page:'Dashboard'}) %> 

<div id="load"></div>

<div class="alert alert-dismissible fade show" role="alert" id="success-alert">
    <p id="alertMessage" style="margin: 0;">Edited successfully</p>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>

 <!-- Modal -->
 <div class="modal fade" id="addTestimonial" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Add Testimonials</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form onsubmit="addTestimonial(event)" id="form" method="post" enctype="multipart/form-data" autocomplete="off">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                            <div class="form-group">
                                <label for="name">Name</label>
                                <input type="text" id="name" name="name" class="form-control" placeholder="Enter name.." style="margin: 10px 0px;" required>
                            </div>
                            <div class="form-group">
                                <label for="tag_line">Tag line</label>
                                <input type="text" id="tag_line" name="tag_line" class="form-control" placeholder="Enter tag line.." style="margin: 10px 0px;" required>
                            </div>
                            <div class="form-group">
                                <label for="message" style="margin: 10px 0px;">Message</label>
                                <textarea class="form-control" id="message" name="message" rows="3" placeholder="Enter message here.." style="margin: 10px 0px;" required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="profile_images" style="margin: 10px 0px;">Profile Image</label>
                                <input class="form-control" onchange="uploadImages('add')" style="height: unset;border-radius: 8px;" type="file" id="profile_images" name="profile_images" accept="image/*">
                            </div>
                            <div id="preview" class="row preview_images">
                                
                            </div>
                            <div class="button">
                                <button type="submit" id="book_verify" class="btn btn-primary d-flex justify-content-center" style="width: 100%;margin-top: 20px;">Create</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="editTestimonial" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Edit Testimonial</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form onsubmit="saveTestimonial(event)" id="form_" class="edit_form" method="post" enctype="multipart/form-data" autocomplete="off">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                            <div class="form-group">
                                <label for="name">Name</label>
                                <input type="text" id="editname" name="editname" class="form-control" placeholder="Enter name.." style="margin: 10px 0px;" required>
                            </div>
                            <div class="form-group">
                                <label for="tag_line">Tag line</label>
                                <input type="text" id="edittag_line" name="edittag_line" class="form-control" placeholder="Enter tag line (max length 250).." style="margin: 10px 0px;" maxlength="250" required>
                            </div>
                            <div class="form-group">
                                <label for="message" style="margin: 10px 0px;">Message</label>
                                <textarea class="form-control" id="editmessage" name="editmessage" rows="3" placeholder="Enter message here.." style="margin: 10px 0px;" required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="edit_profile_images" style="margin: 10px 0px;">Profile Image</label>
                                <input class="form-control" onchange="uploadImages('edit')" style="height: unset;border-radius: 8px;" type="file" id="edit_profile_images" name="images" accept="image/*">
                            </div>
                            <div id="editpreview" class="row preview_images">
                                
                            </div>
                            <div class="button">
                                <button type="submit" id="edit_book_verify" class="btn btn-primary d-flex justify-content-center" style="width: 100%;margin-top: 20px;">Save</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="selectCoverPhoto" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Select Cover Photo</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row preview_allImages" id="allImages">
  
                </div>
              <div class="button">
                <button onclick="saveSelectedImage()" type="submit" id="testiomonial_verify" class="btn btn-primary d-flex justify-content-center" style="width: 100%;margin-top: 20px;">Save</button>
              </div>
            </div>
        </div>
    </div>
  </div>

<div class="container-fluid" id="main">
    <div class="top" id="content">
        <div class="title">
            <h5>Testimonials</h5>
            <p>See all the testimonials here.</p>
        </div>
        <div class="button">
        </div>
    </div>
    <br>
    <div class="content_table">
        <div class="search_bar">
                <div class="row">
                    <div class="col-lg-8 col-md-6 d-flex align-items-center">
                      <form action="/admin/testimonials/getSearchTestimonials" method="get">
                        <div class="form-group input-group search" style="width: 300px;">
                            <a><span class="iconify" data-icon="akar-icons:search"></span></a>
                            <input type="text" class="form-control" id="searchText" name="name" placeholder="Search by name..." value="<%= searchValue %>" maxlength="13" required>
                        </div>
                        <input type="submit" hidden />
                      </form>
                    </div>
                    <div class="col-lg-4 col-md-6 d-flex align-items-center justify-content-md-end justify-content-start">
                        <% if(!searchPage) { %> 
                            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addTestimonial"><span class="iconify" data-icon="carbon:add-alt"></span>&nbsp;&nbsp;Add testimonials</button>
                        <% } else { %>
                            <button class="btn btn-primary" onclick="location.href='/admin/testimonials?page=1'" data-bs-toggle="modal" data-bs-target="#addBook">Reload</button>
                        <% } %>
                    </div>
                </div>
        </div>
        <br>
        <table>
            <thead>
              <tr>
                <th>#</th>
                <th>NAME</th>
                <th>TAG LINE</th>
                <th>MESSAGE</th>
                <th>SELECT IMP</th>
                <th>OPTIONS</th>
              </tr>
            </thead>
            <tbody>
                <% if(data.length == 0) { %> 
                    <td>No testimonials present</td>
                <% } else { %>
                    <% data.forEach((testimonial,index) => { %> 
                        <tr>
                          <th scope="row"><%= (index+1+metadata.offset) %></th>
                          <td>
                            <div style="display: flex;align-items: center;">
                                <div class="profile-image" style="min-width: 55px !important;height: 55px !important;overflow: hidden;border-radius: 50%;">
                                    <img src="<%= testimonial.profile_image %>" alt="" style="width: 55px;height: 55px;">
                                </div>
                                <p style="margin: 0px 5px 0px 5px;"><%= testimonial.name %></p>
                            </div>
                          </td>
                          <td><%= testimonial.tag_line %></td>
                          <td style="width: 50%;"><%- testimonial.message %></td>
                          <td> 
                            <div class="form-check form-switch d-flex justify-content-center">
                                <% if(testimonial.imp == 1){ %> 
                                    <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault" onclick="toggleBlocked('<%= testimonial.id %>','/admin/testimonials/markedTestimonialImportant')" checked>
                                <% } else { %>
                                    <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault" onclick="toggleBlocked('<%= testimonial.id %>','/admin/testimonials/markedTestimonialImportant')">
                                <% } %>
                            </div>
                          </td>
                          <td>
                            <div class="options">
                                <a class="edit" onclick="editTestimonial('<%= testimonial.id %>','<%= testimonial.name %>','<%= testimonial.tag_line %>','<%= testimonial.profile_image %>')"><span class="iconify" data-icon="akar-icons:edit"></span></a>
                                <a class="delete" onclick="deleteTestimonial('<%= testimonial.id %>')"><span class="iconify" data-icon="ant-design:delete-outlined"></span></a>
                                <input type="hidden" name="" id="ckeditormessagevalue<%= testimonial.id %>" value="<%= testimonial.message %>">
                            </div>
                          </td>
                        </tr>
                    <% }); %> 
                <% } %> 
            </tbody>
          </table>
          <% if(!searchPage && data.length != 0 && metadata.total_pages > 1) { %> 
            <div class="pages">
                <div class="total_pages">
                    <div class="form-group">
                        <input type="number" class="form-control" id="pageNumber" name="pageNumber" placeholder="Total pages = <%= metadata.total_pages %> ">
                    </div>
                    <button class="btn btn-primary" onclick="goToPage()">Go</button>
                </div>
                <div class="inner_pages">
                    <% if(metadata.page == 1) { %>
                        <a id="prev" class="disabled">Prev</a>
                    <% } else { %>
                        <a id="prev" onclick="location.href='/admin/testimonials?page=<%= metadata.page - 1 %>'">Prev</a>
                    <% } %>
                    <% if(metadata.total_pages >= 3) { %> 
                        <% if(metadata.page == metadata.total_pages) { %> 
                            <a class="page" onclick="location.href='/admin/testimonials?page=<%= metadata.page - 2 %>'"><%= metadata.page - 2 %></a>
                            <a class="page" onclick="location.href='/admin/testimonials?page=<%= metadata.page - 1 %>'"><%= metadata.page - 1 %></a>
                            <a class="page selected_page" onclick="location.href='/admin/testimonials?page=<%= metadata.page %>'"><%= metadata.page %></a>
                        <% } else if(metadata.page == (metadata.total_pages - 1)) { %>
                            <a class="page" onclick="location.href='/admin/testimonials?page=<%= metadata.page - 1 %>'"><%= metadata.page - 1 %></a>
                            <a class="page selected_page" onclick="location.href='/admin/testimonials?page=<%= metadata.page %>'"><%= metadata.page %></a>
                            <a class="page" onclick="location.href='/admin/testimonials?page=<%= metadata.page + 1 %>'"><%= metadata.page + 1 %></a>
                        <% } else { %>
                            <a class="page selected_page" onclick="location.href='/admin/testimonials?page=<%= metadata.page %>'"><%= metadata.page %></a>
                            <a class="page" onclick="location.href='/admin/testimonials?page=<%= metadata.page + 1 %>'"><%= metadata.page + 1 %></a>
                            <a class="page" onclick="location.href='/admin/testimonials?page=<%= metadata.page + 2 %>'"><%= metadata.page + 2 %></a>
                        <% } %>
                    <% } else if(metadata.total_pages == 2) { %>
                        <% if(metadata.page == metadata.total_pages) { %> 
                            <a class="page" onclick="location.href='/admin/testimonials?page=<%= metadata.page - 1 %>'"><%= metadata.page - 1 %></a>
                            <a class="page selected_page" onclick="location.href='/admin/testimonials?page=<%= metadata.page %>'"><%= metadata.page %></a>
                        <% } else if(metadata.page == (metadata.total_pages - 1)) { %>
                            <a class="page selected_page" onclick="location.href='/admin/testimonials?page=<%= metadata.page %>'"><%= metadata.page %></a>
                            <a class="page" onclick="location.href='/admin/testimonials?page=<%= metadata.page + 1 %>'"><%= metadata.page + 1 %></a>
                        <% } %>
                    <% } else if(metadata.total_pages == 1) { %>
                        <a class="page selected_page" onclick="location.href='/admin/testimonials?page=<%= metadata.page %>'"><%= metadata.page %></a>
                    <% } %>
                    <% if(metadata.page == metadata.total_pages) { %> 
                        <a id="next" class="disabled">Next</a>
                    <% } else { %>
                        <a id="next" onclick="location.href='/admin/testimonials?page=<%= metadata.page + 1 %>'">Next</a>
                    <% } %>
                </div>
            </div>
          <% } %> 
    </div>
</div>

<!-- Common.js -->
<script src="/javascripts/common.js"></script>
<!---->

<script>


$(function(){
  // bootstraps modals
    editModal = new bootstrap.Modal(document.getElementById('editTestimonial'));
    selectCoverPhotoModal = new bootstrap.Modal(document.getElementById('selectCoverPhoto'));
    if($('textarea#message').length){
        //ckeditor defination
        CKEDITOR.replace('message',{
            filebrowserUploadUrl: '/admin/common/upload',
            filebrowserUploadMethod: 'form'
        });
    }
    if($('textarea#editmessage').length){
        //ckeditor defination
        CKEDITOR.replace('editmessage',{
            filebrowserUploadUrl: '/admin/common/upload',
            filebrowserUploadMethod: 'form'
        });
    }
});

/* Functions */

//Delete testimonial
function deleteTestimonial(id) {
    if(confirm('Do you want to delete it?') == true){
      $.ajax({
            url : '/admin/testimonials/deleteTestimonial',
            dataType: "json",
            type: "POST",
            data: {
                id:id
            },
            success: function(response){
              if(document.getElementById('success-alert')) {
                document.getElementById('success-alert').classList.add('alert-success');
                document.getElementById('alertMessage').innerHTML = 'Trainer deleted successfully';
                $("#success-alert").fadeTo(2000, 500).slideUp(500, function(){
                  $("#success-alert").slideUp(500);
                });
              }
              setTimeout(() => {
                location.reload();
              },1000);
            },
            error: function(err){
                    console.log(err);
                if(document.getElementById('success-alert')) {
                        document.getElementById('success-alert').classList.add('alert-danger');
                        document.getElementById('alertMessage').innerHTML = 'Some error occurred.';
                        $("#success-alert").fadeTo(2000, 500).slideUp(500, function(){
                            $("#success-alert").slideUp(500);
                        });
                    }
            }
      });
    } 
  }

  //Edit testimonial
  function editTestimonial(id,name,tag_line,profile_image) {
    if(document.getElementById('success-alert')) {
      if(document.getElementById('success-alert').classList.contains('alert-success')) {
        document.getElementById('success-alert').classList.remove('alert-success');
      }
      if(document.getElementById('success-alert').classList.contains('alert-danger')) {
        document.getElementById('success-alert').classList.remove('alert-danger');
      }
      if(document.getElementById('success-alert').classList.contains('alert-warning')) {
        document.getElementById('success-alert').classList.remove('alert-warning');
      }
    }
      document.getElementById('editpreview').innerHTML = '';
      if(profile_image != null && profile_image.length !=0){
        $('#editpreview').append('<div class="col-lg-4 col-md-4 col-sm-6 col-6" id="edit_gallery_image_profile_'+ profile_image +'"><div class="card" id="append_image_'+ profile_image +'"><a class="delete_gallery_image" onclick="deleteEditCurrentGalleryImage(\''+ ( "edit_gallery_image_profile_"+ profile_image )  +'\',\''+ profile_image +'\')"><span class="iconify" data-icon="akar-icons:cross"></span></a><img src="'+ profile_image +'" id="preview_galler_image_'+ profile_image +'" alt=""></div><input type="hidden" class="edit_gallery_image_path" name="gallery_image_path" id="gallery_image_path_'+ profile_image +'" value="'+ profile_image +'"></div>');
      }
      document.getElementById('editname').value = name;
      document.getElementById('edittag_line').value = tag_line;
      CKEDITOR.instances['editmessage'].setData(document.getElementById('ckeditormessagevalue' + id).value);
      document.getElementsByClassName('edit_form')[0].setAttribute('id',`form_${id}`);
      editModal.toggle();
  }


  //Upload image
  function uploadImages(value) {
    document.getElementById('load').style.visibility="visible";
    if(document.getElementById('success-alert')) {
      if(document.getElementById('success-alert').classList.contains('alert-success')) {
        document.getElementById('success-alert').classList.remove('alert-success');
      }
      if(document.getElementById('success-alert').classList.contains('alert-danger')) {
        document.getElementById('success-alert').classList.remove('alert-danger');
      }
      if(document.getElementById('success-alert').classList.contains('alert-warning')) {
        document.getElementById('success-alert').classList.remove('alert-warning');
      }
    }
      if(value != 'edit'){
        var imageFiles = document.getElementById('profile_images').files;
        var form = new FormData();
        for(var i=0;i<imageFiles.length;i++){
            if(imageFiles[i] != undefined){
                form.append(`book_images`, imageFiles[i]);
            }
        }

        $.ajax({
            url : "/admin/common/saveBookImages",
            type: "POST",
            cache: false,
            contentType: false,
            processData: false,
            data : form,
            success: function(response){
                // console.log(response.files);
                for(var i=0;i<response.files.length;i++) {
                    var path = response.files[i].slice(6,response.files[i].length);
                    $('#preview').append('<div class="col-lg-4 col-md-4 col-sm-6 col-6" id="gallery_image_'+ path +'"><div class="card" id="append_image_'+ path +'"><a class="delete_gallery_image" onclick="deleteCurrentGalleryImage(\''+ ( "gallery_image_"+ path )  +'\',\'gallery_image_path_'+ path +'\')"><span class="iconify" data-icon="akar-icons:cross"></span></a><img src="'+ path +'" id="preview_galler_image_'+ path +'" alt=""><input type="hidden" class="gallery_image_path" name="gallery_image_path" id="gallery_image_path_'+ path +'" value="'+ path +'"></div></div>');
                }
                document.getElementById('profile_images').value='';
                document.getElementById('load').style.visibility="hidden";
            },
            error: function(err){
                if(document.getElementById('success-alert')) {
                        document.getElementById('success-alert').classList.add('alert-danger');
                        document.getElementById('alertMessage').innerHTML = 'Some error occurred.';
                        $("#success-alert").fadeTo(2000, 500).slideUp(500, function(){
                            $("#success-alert").slideUp(500);
                        });
                    }
            }
        });
      } else {
        var imageFiles = document.getElementById('edit_profile_images').files;
        var id = document.getElementsByClassName('edit_form')[0].getAttribute('id').split('_')[1];
        //   console.log(imageFiles);
        var form = new FormData();
        for(var i=0;i<imageFiles.length;i++){
            if(imageFiles[i] != undefined){
                form.append(`book_images`, imageFiles[i]);
            }
        }

        $.ajax({
            url : `/admin/common/saveEditImages/${id}/testimonials`,
            type: "POST",
            cache: false,
            contentType: false,
            processData: false,
            data : form,
            success: function(response){
                // console.log(response.files);
                for(var i=0;i<response.files.length;i++) {
                    var path = response.files[i].slice(6,response.files[i].length);
                    $('#editpreview').append('<div class="col-lg-4 col-md-4 col-sm-6 col-6" id="edit_gallery_image_'+ path +'"><div class="card" id="append_image_'+ path +'"><a class="delete_gallery_image" onclick="deleteEditCurrentGalleryImage(\''+ ( "edit_gallery_image_"+ path )  +'\',\''+ path +'\')"><span class="iconify" data-icon="akar-icons:cross"></span></a><img src="'+ path +'" id="preview_galler_image_'+ path +'" alt=""></div><input type="hidden" class="edit_gallery_image_path" name="gallery_image_path" id="gallery_image_path_'+ path +'" value="'+ path +'"></div>');
                }
                document.getElementById('edit_profile_images').value='';
                document.getElementById('load').style.visibility="hidden";
            },
            error: function(err){
                if(document.getElementById('success-alert')) {
                        document.getElementById('success-alert').classList.add('alert-danger');
                        document.getElementById('alertMessage').innerHTML = 'Some error occurred.';
                        $("#success-alert").fadeTo(2000, 500).slideUp(500, function(){
                            $("#success-alert").slideUp(500);
                        });
                    }
            }
        });
      }
  }

//Go to page 
function goToPage() {
    var page = document.getElementById('pageNumber').value;
    var total_pages = '<%- metadata.total_pages %>';
    if(page.length != 0) {
        if(parseInt(page) > parseInt(total_pages)){
            alert('Please enter a page number less than total pages');
        } else if(parseInt(page) == 0) {
            alert('Please enter a page number greater than 0');
        } else {
            location.href=`/admin/testimonials?page=${page}`;
        }
    } else {
        alert('Please enter a page number first');
    }
}

  //Add Testimonial
  function addTestimonial(event) {
    event.preventDefault();
    if(document.getElementById('success-alert')) {
      if(document.getElementById('success-alert').classList.contains('alert-success')) {
        document.getElementById('success-alert').classList.remove('alert-success');
      }
      if(document.getElementById('success-alert').classList.contains('alert-danger')) {
        document.getElementById('success-alert').classList.remove('alert-danger');
      }
      if(document.getElementById('success-alert').classList.contains('alert-warning')) {
        document.getElementById('success-alert').classList.remove('alert-warning');
      }
    }
    var message = CKEDITOR.instances['message'].getData();
    var name = document.getElementById('name').value;
    var tag_line = document.getElementById('tag_line').value;
    if(message.length != 0) {
        var gallery = document.getElementsByClassName("gallery_image_path");
        var gallery_values = [];
        if(gallery.length != 0) {
            for(var i =0;i<gallery.length;i++) {
                gallery_values.push(gallery[i].value);
            }
            $.ajax({
                url : '/admin/testimonials/addTestimonial',
                dataType: "json",
                type: "POST",
                data: {
                    name:name,
                    message:message,
                    tag_line:tag_line,
                    gallery:gallery_values,
                },
                success: function(response){
                    if(document.getElementById('success-alert')) {
                        document.getElementById('success-alert').classList.add('alert-success');
                        document.getElementById('alertMessage').innerHTML = 'Testimonial added successfully';
                        $("#success-alert").fadeTo(2000, 500).slideUp(500, function(){
                            $("#success-alert").slideUp(500);
                        });
                    }
                    setTimeout(() => {
                        location.reload();
                    },1000);
                },
                error: function(err){
                    console.log(err);
                    if(document.getElementById('success-alert')) {
                        document.getElementById('success-alert').classList.add('alert-danger');
                        document.getElementById('alertMessage').innerHTML = 'Some error occurred.';
                        $("#success-alert").fadeTo(2000, 500).slideUp(500, function(){
                            $("#success-alert").slideUp(500);
                        });
                    }
                }
            });
      } else {
        if(document.getElementById('success-alert')) {
                document.getElementById('success-alert').classList.add('alert-warning');
                  document.getElementById('alertMessage').innerHTML = 'Select an image first';
                $("#success-alert").fadeTo(2000, 500).slideUp(500, function(){
                    $("#success-alert").slideUp(500);
                });
            }
      }
    } else {
        if(document.getElementById('success-alert')) {
                document.getElementById('success-alert').classList.add('alert-warning');
                document.getElementById('alertMessage').innerHTML = 'Please fill all the values first.';
                $("#success-alert").fadeTo(2000, 500).slideUp(500, function(){
                    $("#success-alert").slideUp(500);
                });
            }
    }
    // console.log(data);
  }

  //Save Testimonial
  function saveTestimonial(event) {
    event.preventDefault();
    if(document.getElementById('success-alert')) {
      if(document.getElementById('success-alert').classList.contains('alert-success')) {
        document.getElementById('success-alert').classList.remove('alert-success');
      }
      if(document.getElementById('success-alert').classList.contains('alert-danger')) {
        document.getElementById('success-alert').classList.remove('alert-danger');
      }
      if(document.getElementById('success-alert').classList.contains('alert-warning')) {
        document.getElementById('success-alert').classList.remove('alert-warning');
      }
    }
    var message = CKEDITOR.instances['editmessage'].getData();
    var name = document.getElementById('editname').value;
    var tag_line = document.getElementById('edittag_line').value;
    var id = document.getElementsByClassName('edit_form')[0].getAttribute('id').split('_')[1];
    if(message.length != 0) {
        var gallery = document.getElementsByClassName("edit_gallery_image_path");
        var gallery_values = [];
        if(gallery.length != 0) {
            for(var i =0;i<gallery.length;i++) {
                gallery_values.push(gallery[i].value);
            }
            $.ajax({
                url : '/admin/testimonials/saveTestimonial',
                dataType: "json",
                type: "POST",
                data: {
                    name:name,
                    message:message,
                    tag_line:tag_line,
                    gallery:gallery_values,
                    id:id,
                },
                success: function(response){
                    if(document.getElementById('success-alert')) {
                        document.getElementById('success-alert').classList.add('alert-success');
                        document.getElementById('alertMessage').innerHTML = 'Testimonial edited successfully';
                        $("#success-alert").fadeTo(2000, 500).slideUp(500, function(){
                            $("#success-alert").slideUp(500);
                        });
                    }
                    setTimeout(() => {
                        location.reload();
                    },1000);
                },
                error: function(err){
                    console.log(err);
                    if(document.getElementById('success-alert')) {
                        document.getElementById('success-alert').classList.add('alert-danger');
                        document.getElementById('alertMessage').innerHTML = 'Some error occurred.';
                        $("#success-alert").fadeTo(2000, 500).slideUp(500, function(){
                            $("#success-alert").slideUp(500);
                        });
                    }
                }
            });
      } else {
        if(document.getElementById('success-alert')) {
                document.getElementById('success-alert').classList.add('alert-warning');
                document.getElementById('alertMessage').innerHTML = 'Select an image first';
                $("#success-alert").fadeTo(2000, 500).slideUp(500, function(){
                    $("#success-alert").slideUp(500);
                });
            }
      }
    } else {
        if(document.getElementById('success-alert')) {
                document.getElementById('success-alert').classList.add('alert-warning');
                document.getElementById('alertMessage').innerHTML = 'Please fill all the values first.';
                $("#success-alert").fadeTo(2000, 500).slideUp(500, function(){
                    $("#success-alert").slideUp(500);
                });
            }
    }
    // console.log(data);
  }

</script>

<%- include('../../components/footer/footer.ejs') %> 